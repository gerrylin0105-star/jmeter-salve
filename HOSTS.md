# JMeter Slave 主機清單

## 部署主機列表

| 主機編號 | IP 地址 | 名稱 | 狀態 |
|---------|---------|------|------|
| Host 1 | 223.27.43.100 | host-100 | ✅ 啟用 |
| Host 2 | 223.27.43.101 | host-101 | ✅ 啟用 |
| Host 3 | 223.27.43.120 | host-120 | ✅ 啟用 |
| Host 4 | 223.27.43.121 | host-121 | ✅ 啟用 |

---

## GitHub Actions 配置

所有主機使用相同的 SSH 憑證：
- **Username**: 存儲在 `SSH_USERNAME` secret
- **Password**: 存儲在 `SSH_PASSWORD` secret

---

## 部署方式

### 自動部署
Push 到 `main` 分支會**同時部署到 4 台主機**。

### 手動部署
1. 前往 https://github.com/gerrylin0105-star/jmeter-salve/actions
2. 點擊 "Deploy JMeter Slave"
3. 點擊 "Run workflow"
4. 4 台主機會並行部署

---

## 預設容器配置（每台主機）

- **容器數量**: 5 個（可調整）
- **RMI 端口**: 7001-7005
- **Data 端口**: 50001-50005
- **JVM Heap**: 1GB - 4GB
- **CPU 限制**: 2 核心
- **記憶體限制**: 6GB

---

## Master 連線配置

在 Master 的 `jmeter.properties` 中設定：

```properties
remote_hosts=223.27.43.100:7001,223.27.43.100:7002,223.27.43.100:7003,223.27.43.100:7004,223.27.43.100:7005,\
223.27.43.101:7001,223.27.43.101:7002,223.27.43.101:7003,223.27.43.101:7004,223.27.43.101:7005,\
223.27.43.120:7001,223.27.43.120:7002,223.27.43.120:7003,223.27.43.120:7004,223.27.43.120:7005,\
223.27.43.121:7001,223.27.43.121:7002,223.27.43.121:7003,223.27.43.121:7004,223.27.43.121:7005
```

**總計**: 20 個 Slave 節點（4 台主機 × 5 個容器）

---

## 資源需求（總計）

| 項目 | 單台主機 | 4 台主機總計 |
|------|---------|-------------|
| CPU | 12 核心 | 48 核心 |
| 記憶體 | 32 GB | 128 GB |
| 磁碟 | 50 GB | 200 GB |
| 並發容量 | ~1500 用戶 | ~6000 用戶 |

---

## 診斷工具

在任何主機上執行診斷：

```bash
cd /opt/jmeter-slave
sudo ./diagnose.sh
```

---

## 新增或移除主機

編輯 `.github/workflows/deploy.yml` 的 `matrix.host` 區塊：

```yaml
matrix:
  host:
    - ip: 新主機IP
      name: host-name
```
